<?xml version="1.0" encoding="UTF-8"?>
<precice-configuration>
  <!-- Removed <solver-interface> wrapper and elevated children. -->
  
  <!-- Data vector definitions remain unchanged. -->
  <data:vector name="Forces1"/>
  <data:vector name="Displacements1"/>
  <data:vector name="Forces2"/>
  <data:vector name="Displacements2"/>
  <data:vector name="Forces3"/>
  <data:vector name="Displacements3"/>

  <!-- Updated mesh names: replaced underscores with hyphens and added dimensions="2". -->
  <mesh name="NASTIN1-Mesh" dimensions="2">
    <use-data name="Displacements1"/>
    <use-data name="Forces1"/>
  </mesh>

  <mesh name="NASTIN2-Mesh1" dimensions="2">
    <use-data name="Displacements2"/>
    <use-data name="Forces2"/>
  </mesh>

  <mesh name="NASTIN2-Mesh2" dimensions="2">
    <use-data name="Displacements3"/>
    <use-data name="Forces3"/>
  </mesh>

  <mesh name="SOLIDZ1-Mesh1" dimensions="2">
    <use-data name="Displacements1"/>
    <use-data name="Forces1"/>
  </mesh>

  <mesh name="SOLIDZ1-Mesh2" dimensions="2">
    <use-data name="Displacements2"/>
    <use-data name="Forces2"/>
  </mesh>

  <mesh name="SOLIDZ2-Mesh" dimensions="2">
    <use-data name="Displacements3"/>
    <use-data name="Forces3"/>
  </mesh>

  <!-- Participant NASTIN1 migration -->
  <participant name="NASTIN1">
    <!-- Replaced use-mesh with new provide/receive syntax and updated mesh names -->
    <receive-mesh name="SOLIDZ1-Mesh1" from="SOLIDZ1"/>
    <provide-mesh name="NASTIN1-Mesh"/>
    <write-data name="Forces1" mesh="NASTIN1-Mesh"/>
    <read-data name="Displacements1" mesh="NASTIN1-Mesh"/>
    <!-- Removed timing attributes from mappings -->
    <mapping:nearest-neighbor 
         direction="write" 
         from="NASTIN1-Mesh" 
         to="SOLIDZ1-Mesh1" 
         constraint="conservative"/>
    <mapping:nearest-neighbor 
         direction="read" 
         from="SOLIDZ1-Mesh1" 
         to="NASTIN1-Mesh" 
         constraint="consistent"/>
  </participant>

  <!-- Participant NASTIN2 migration -->
  <participant name="NASTIN2">
    <!-- Replaced use-mesh elements with provide/receive syntax and updated mesh names -->
    <receive-mesh name="SOLIDZ1-Mesh2" from="SOLIDZ1"/>
    <provide-mesh name="NASTIN2-Mesh1"/>
    <receive-mesh name="SOLIDZ2-Mesh" from="SOLIDZ2"/>
    <provide-mesh name="NASTIN2-Mesh2"/>
    <receive-mesh name="SOLIDZ1-Mesh1" from="SOLIDZ1"/>
    <write-data name="Forces2" mesh="NASTIN2-Mesh1"/>
    <read-data name="Displacements2" mesh="NASTIN2-Mesh1"/>
    <write-data name="Forces3" mesh="NASTIN2-Mesh2"/>
    <read-data name="Displacements3" mesh="NASTIN2-Mesh2"/>
    <!-- Removed timing attributes from mapping elements -->
    <mapping:nearest-neighbor 
         direction="write" 
         from="NASTIN2-Mesh1" 
         to="SOLIDZ1-Mesh2" 
         constraint="conservative"/>
    <mapping:nearest-neighbor 
         direction="read" 
         from="SOLIDZ1-Mesh2" 
         to="NASTIN2-Mesh1" 
         constraint="consistent"/>
    <mapping:nearest-neighbor 
         direction="write" 
         from="NASTIN2-Mesh1" 
         to="SOLIDZ2-Mesh" 
         constraint="conservative"/>
    <mapping:nearest-neighbor 
         direction="read" 
         from="SOLIDZ2-Mesh" 
         to="NASTIN2-Mesh2" 
         constraint="consistent"/>
  </participant>

  <!-- Participant SOLIDZ1 migration -->
  <participant name="SOLIDZ1">
    <provide-mesh name="SOLIDZ1-Mesh1"/>
    <provide-mesh name="SOLIDZ1-Mesh2"/>
    <write-data name="Displacements1" mesh="SOLIDZ1-Mesh1"/>
    <read-data name="Forces1" mesh="SOLIDZ1-Mesh1"/>
    <write-data name="Displacements2" mesh="SOLIDZ1-Mesh2"/>
    <read-data name="Forces2" mesh="SOLIDZ1-Mesh2"/>
  </participant>

  <!-- Participant SOLIDZ2 migration -->
  <participant name="SOLIDZ2">
    <provide-mesh name="SOLIDZ2-Mesh"/>
    <write-data name="Displacements3" mesh="SOLIDZ2-Mesh"/>
    <read-data name="Forces3" mesh="SOLIDZ2-Mesh"/>
  </participant>

  <!-- Converted m2n:mpi tags to m2n:sockets with updated attributes -->
  <m2n:sockets acceptor="NASTIN1" connector="SOLIDZ1" exchange-directory="../"/>
  <m2n:sockets acceptor="SOLIDZ1" connector="NASTIN2" exchange-directory="../"/>
  <m2n:sockets acceptor="NASTIN2" connector="SOLIDZ2" exchange-directory="../"/>

  <coupling-scheme:multi>
    <participant name="NASTIN1"/>
    <participant name="NASTIN2" control="yes"/>
    <participant name="SOLIDZ1"/>
    <participant name="SOLIDZ2"/>
    <!-- Renamed max-timesteps and timestep-length -->
    <max-time-windows value="200"/>
    <time-window-size value="1e-3"/>
    <!-- Updated exchange elements with new mesh names -->
    <exchange data="Forces1" mesh="SOLIDZ1-Mesh1" from="NASTIN1" to="SOLIDZ1"/> 
    <exchange data="Displacements1" mesh="SOLIDZ1-Mesh1" from="SOLIDZ1" to="NASTIN1"/>
    <exchange data="Forces2" mesh="SOLIDZ1-Mesh2" from="NASTIN2" to="SOLIDZ1"/> 
    <exchange data="Displacements2" mesh="SOLIDZ1-Mesh2" from="SOLIDZ1" to="NASTIN2"/>
    <exchange data="Forces3" mesh="SOLIDZ2-Mesh" from="NASTIN2" to="SOLIDZ2"/> 
    <exchange data="Displacements3" mesh="SOLIDZ2-Mesh" from="SOLIDZ2" to="NASTIN2"/>
    <exchange data="Forces1" mesh="SOLIDZ1-Mesh1" from="NASTIN1" to="NASTIN2"/> 
    <exchange data="Displacements1" mesh="SOLIDZ1-Mesh1" from="SOLIDZ1" to="NASTIN2"/>
    <max-iterations value="30"/>
    <relative-convergence-measure limit="1e-4" data="Displacements1" mesh="SOLIDZ1-Mesh1"/>
    <relative-convergence-measure limit="1e-4" data="Forces1" mesh="SOLIDZ1-Mesh1"/>
    <relative-convergence-measure limit="1e-4" data="Displacements2" mesh="SOLIDZ1-Mesh2"/>
    <relative-convergence-measure limit="1e-4" data="Forces2" mesh="SOLIDZ1-Mesh2"/>
    <relative-convergence-measure limit="1e-4" data="Displacements3" mesh="SOLIDZ2-Mesh"/>
    <relative-convergence-measure limit="1e-4" data="Forces3" mesh="SOLIDZ2-Mesh"/>
    <!-- Removed unsupported extrapolation-order element -->
    <!-- Renamed post-processing:IQN-ILS to acceleration:IQN-ILS and updated child element -->
    <acceleration:IQN-ILS>
      <data name="Displacements1" mesh="SOLIDZ1-Mesh1"/>
      <data name="Forces1" mesh="SOLIDZ1-Mesh1"/>
      <data name="Displacements2" mesh="SOLIDZ1-Mesh2"/>
      <data name="Forces2" mesh="SOLIDZ1-Mesh2"/>
      <data name="Displacements3" mesh="SOLIDZ2-Mesh"/>
      <data name="Forces3" mesh="SOLIDZ2-Mesh"/>
      <preconditioner type="residual-sum"/>
      <filter type="QR1" limit="1e-6"/>
      <initial-relaxation value="0.1"/>
      <max-used-iterations value="100"/>
      <!-- Renamed timesteps-reused to time-windows-reused -->
      <time-windows-reused value="20"/>
    </acceleration:IQN-ILS>
  </coupling-scheme:multi>
</precice-configuration>
