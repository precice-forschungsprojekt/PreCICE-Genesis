{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "coupling-scheme": {
            "type": "object",
            "properties": {
                "max-time": {
                    "type": ["number", "string"],
                    "description": "Maximum simulation time, supports scientific notation",
                    "pattern": "^[+-]?([0-9]*[.])?[0-9]+([eE][+-]?[0-9]+)?$"
                },
                "time-window-size": {
                    "type": ["number", "string"],
                    "description": "Size of each time window, supports scientific notation",
                    "pattern": "^[+-]?([0-9]*[.])?[0-9]+([eE][+-]?[0-9]+)?$"
                },
                "relative-accuracy": {
                    "type": ["number", "string"],
                    "description": "Relative accuracy for coupling, supports scientific notation",
                    "pattern": "^[+-]?([0-9]*[.])?[0-9]+([eE][+-]?[0-9]+)?$"
                },
                "sync-mode": {
                    "type": "string",
                    "enum": ["on", "off"],
                    "description": "Synchronization mode for coupling",
                    "default": "on"
                },
                "mode": {
                    "type": "string",
                    "enum": ["fundamental", "advanced"],
                    "description": "Simulation mode",
                    "default": "fundamental"
                }
            },
            "required": ["max-time", "time-window-size", "relative-accuracy"],
            "additionalProperties": false
        },
        "participants": {
            "type": "object",
            "description": "Mapping of participant names to their solver codes",
            "additionalProperties": {
                "type": ["string", "object"],
                "description": "Solver code or detailed participant configuration",
                "properties": {
                    "solver": {"type": "string"},
                    "interface": {"type": "string"}
                },
                "required": ["solver"]
            },
            "minProperties": 1,
            "maxProperties": 10
        },
        "exchanges": {
            "type": "array",
            "minItems": 1,
            "maxItems": 10,
            "items": {
                "type": "object",
                "properties": {
                    "from": {
                        "type": "string",
                        "description": "Source participant name",
                        "minLength": 1,
                        "maxLength": 50
                    },
                    "from-patch": {
                        "type": "string", 
                        "description": "Source patch/interface name",
                        "minLength": 1,
                        "maxLength": 50
                    },
                    "to": {
                        "type": "string",
                        "description": "Target participant name",
                        "minLength": 1,
                        "maxLength": 50
                    },
                    "to-patch": {
                        "type": "string",
                        "description": "Target patch/interface name",
                        "minLength": 1,
                        "maxLength": 50
                    },
                    "data": {
                        "type": "string",
                        "description": "Type of data being exchanged",
                        "enum": ["Force", "Displacement", "Temperature", "Pressure"],
                        "minLength": 1,
                        "maxLength": 50
                    },
                    "type": {
                        "type": "string",
                        "enum": ["strong", "weak"],
                        "description": "Coupling type"
                    }
                },
                "required": ["from", "from-patch", "to", "to-patch", "data", "type"],
                "additionalProperties": false
            }
        }
    },
    "required": ["coupling-scheme", "participants", "exchanges"],
    "additionalProperties": false,
    "description": "Topology configuration for multi-physics simulations"
}